	ORG 0000H
	LJMP START
	ORG 0003H
	LJMP LINT0
	ORG 000BH
	LJMP TIME
	ORG 0030H
		;问题在于定时器扫描数码管
		
START:
	MOV TMOD, #01H
	MOV TL0, #0B0H
	MOV TH0, #03CH ;50MS定时器
	MOV P0,#00H
	MOV P2,#00H
	MOV DPTR,#SMG
	SETB ET0
	SETB TR0
	SETB IT0
	SETB EX0
	SETB EA
	MOV R0,#2H;100MS刷新
	MOV R1,#00H;100MS刷新
MAIN:
	JNZ R0
	SJMP $
LINT0:
	INC R1
	MOV A,R1
	CJNE A,#100,RE
	MOV R1,#00H
RE:
	RETI
TIME:
	MOV TL0, #0B0H
	MOV TH0, #03CH
	DJNZ R0,SS
	MOV R0,#2H
	;MOV P0,#00H
	SETB P2.1
	MOV P0, #10111111B
	CLR P2.1
	SETB P2.0
	MOV A,R1
	MOV B,#10
	DIV AB
	MOVC A,@A+DPTR
	MOV P0,A
	MOV A,B
	CLR P2.0
	;MOV P0,#00H
	SETB P2.1
	MOV P0, #01111111B
	CLR P2.1
	SETB P2.0
	MOVC A,@A+DPTR
	MOV P0,A
	CLR P2.0
SS:
	RETI
SMG:
    DB 03FH  ; "0"
    DB 006H  ; "1"
    DB 05BH  ; "2"
    DB 04FH  ; "3"
    DB 066H  ; "4"
    DB 06DH  ; "5"
    DB 07DH  ; "6"
    DB 007H  ; "7"
    DB 07FH  ; "8"
    DB 06FH  ; "9"
    DB 077H  ; "A"
    DB 07CH  ; "B"
    DB 039H  ; "C"
    DB 05EH  ; "D"
    DB 079H  ; "E"
    DB 071H  ; "F"
END